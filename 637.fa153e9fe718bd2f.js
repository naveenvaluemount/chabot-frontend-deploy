"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[637],{8637:(mt,h,o)=>{o.r(h),o.d(h,{OrganizationsModule:()=>m});var c=o(6895),r=o(4006),T=o(3419),_=o(9080),l=o(2722),t=o(4650),b=o(9274),v=o(7401),Z=o(7009),g=o(3060),C=o(529),A=o(4859),O=o(7392),N=o(284),f=o(9549),z=o(4385),U=o(3238),x=o(266),q=o(2173);const y=["orgTemp"],I=["createdTemp"],J=["updatedTemp"],L=["actionsTemp"],Y=["publishTemp"],Q=["publishonTemp"],S=["statusTemp"];function R(n,a){if(1&n&&(t.TgZ(0,"div",9),t._UZ(1,"div"),t.TgZ(2,"div",10)(3,"div",11),t._uU(4),t.qZA(),t.TgZ(5,"div",12),t._uU(6),t.qZA()()()),2&n){const e=a.row;t.xp6(1),t.uIk("acronym",null==e?null:e.clientName),t.xp6(3),t.Oqu(null==e?null:e.clientName),t.xp6(2),t.Oqu(null==e?null:e.domain)}}function w(n,a){1&n&&(t._uU(0),t.ALo(1,"date")),2&n&&t.hij(" ",t.xi3(1,1,a.row.createdTime,"mediumDate")," ")}function G(n,a){1&n&&(t._uU(0),t.ALo(1,"date")),2&n&&t.hij(" ",t.xi3(1,1,a.row.updatedTime,"mediumDate")," ")}function E(n,a){if(1&n&&t._UZ(0,"app-status-badge",13),2&n){const e=a.row;t.Q6J("className","active"===e.status?"bg-blue-500":"bg-gray-400")("label",e.status)}}function M(n,a){if(1&n&&(t.TgZ(0,"app-status-badge",13)(1,"div",12),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&n){const e=a.row;t.Q6J("className",e.publishedStatus?"bg-green-500":"bg-red-500")("label",e.publishedStatus?"Published":"Un Published"),t.xp6(2),t.Oqu(t.xi3(3,3,e.publishedOn,"mediumDate"))}}const k=function(n){return[n]};function P(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"button",15),t.NdJ("click",function(){const p=t.CHM(e).row,d=t.oxw();return t.KtG(d.deleteFn(p))}),t._UZ(2,"mat-icon",16),t.qZA(),t.TgZ(3,"button",17),t.NdJ("click",function(){const p=t.CHM(e).row,d=t.oxw();return t.KtG(d.updateFn(p))}),t._UZ(4,"mat-icon",16),t.qZA(),t.TgZ(5,"button",18),t._UZ(6,"mat-icon",16),t.qZA()()}if(2&n){const e=a.row;t.xp6(1),t.Q6J("disabled",e.publishedStatus),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:pencil"),t.xp6(1),t.Q6J("routerLink",t.VKq(5,k,e._id)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:eye")}}function F(n,a){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function D(n,a){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function H(n,a){if(1&n&&(t.TgZ(0,"form",19)(1,"div",20)(2,"mat-form-field",21)(3,"mat-label"),t._uU(4,"Published"),t.qZA(),t.TgZ(5,"mat-select",22)(6,"mat-option",23),t._uU(7,"All"),t.qZA(),t.YNc(8,F,2,2,"mat-option",24),t.qZA()()(),t.TgZ(9,"div",20)(10,"mat-form-field",21)(11,"mat-label"),t._uU(12,"Status"),t.qZA(),t.TgZ(13,"mat-select",25)(14,"mat-option",23),t._uU(15,"All"),t.qZA(),t.YNc(16,D,2,2,"mat-option",24),t.qZA()()()()),2&n){const e=t.oxw();t.Q6J("formGroup",e.filter),t.xp6(8),t.Q6J("ngForOf",e.publishedList),t.xp6(8),t.Q6J("ngForOf",e.statusList)}}function j(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"*Required "),t.qZA())}function W(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"*Required "),t.qZA())}function K(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid Email "),t.qZA())}function V(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"*Required "),t.qZA())}function B(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid Phone Number "),t.qZA())}function $(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"*Required "),t.qZA())}function X(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid Domain Name "),t.qZA())}function tt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"*Required "),t.qZA())}function et(n,a){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function at(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"*Required "),t.qZA())}function nt(n,a){if(1&n&&(t.TgZ(0,"div",20)(1,"mat-form-field",28)(2,"mat-label"),t._uU(3,"Status"),t.qZA(),t.TgZ(4,"mat-select",25),t.YNc(5,et,2,2,"mat-option",24),t.qZA(),t.YNc(6,at,2,0,"mat-error",30),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",e.statusList),t.xp6(1),t.Q6J("ngIf",e.form.get("status").hasError("required"))}}function it(n,a){if(1&n&&(t.TgZ(0,"form",19)(1,"div",27)(2,"div",20)(3,"mat-form-field",28)(4,"mat-label"),t._uU(5,"Organization"),t.qZA(),t._UZ(6,"input",29),t.YNc(7,j,2,0,"mat-error",30),t.qZA()(),t.TgZ(8,"div",20)(9,"mat-form-field",28)(10,"mat-label"),t._uU(11,"Email"),t.qZA(),t._UZ(12,"input",31),t.YNc(13,W,2,0,"mat-error",30),t.YNc(14,K,2,0,"mat-error",30),t.qZA()(),t.TgZ(15,"div",20)(16,"mat-form-field",28)(17,"mat-label"),t._uU(18,"Phone Number"),t.qZA(),t._UZ(19,"input",32),t.YNc(20,V,2,0,"mat-error",30),t.YNc(21,B,2,0,"mat-error",30),t.qZA()(),t.TgZ(22,"div",20)(23,"mat-form-field",28)(24,"mat-label"),t._uU(25,"Domain"),t.qZA(),t._UZ(26,"input",33),t.YNc(27,$,2,0,"mat-error",30),t.YNc(28,X,2,0,"mat-error",30),t.qZA()(),t.TgZ(29,"div",20)(30,"mat-form-field",28)(31,"mat-label"),t._uU(32,"Address"),t.qZA(),t._UZ(33,"textarea",34),t.YNc(34,tt,2,0,"mat-error",30),t.qZA()(),t.TgZ(35,"div",20)(36,"mat-form-field",35)(37,"mat-label"),t._uU(38,"Default Answer"),t.qZA(),t._UZ(39,"textarea",36),t.qZA()(),t.YNc(40,nt,7,2,"div",37),t.qZA()()),2&n){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(7),t.Q6J("ngIf",e.form.get("clientName").hasError("required")),t.xp6(6),t.Q6J("ngIf",e.form.get("email").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.form.get("email").hasError("email")),t.xp6(6),t.Q6J("ngIf",e.form.get("phoneNumber").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.form.get("phoneNumber").hasError("pattern")),t.xp6(6),t.Q6J("ngIf",e.form.get("domain").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.form.get("domain").hasError("pattern")),t.xp6(6),t.Q6J("ngIf",e.form.get("address").hasError("required")),t.xp6(6),t.Q6J("ngIf",e.form.get("id").value)}}class u extends T.f{constructor(a,e,i,s,p,d,rt){super(),this.api=a,this.fb=e,this.cd=i,this.fcs=s,this.snackbar=p,this.router=d,this.http=rt,this.isEmpty=!1,this.isLoaded=!1,this.breadcrumbs=[{name:"Home",link:""},{name:"Organizations",link:""}],this.form=this.fb.group({clientName:["",[r.kI.required]],email:["",[r.kI.required,r.kI.email]],phoneNumber:["",[r.kI.required,r.kI.pattern(this.api.patterns.mobile)]],domain:["",[r.kI.required,r.kI.pattern(this.api.patterns.domain)]],address:["",[r.kI.required]],status:[""],publishedStatus:[!0],published:[""],validate:[!0],defaultAnswer:[""],id:[null]}),this.filter=this.fb.group({status:["all"],published_status:["all"]}),this.statusList=[{id:0,name:"Active",value:"active"},{id:1,name:"In Active",value:"inActive"}],this.publishedList=[{id:0,name:"Published",value:"published"},{id:1,name:"Un Published",value:"unPublished"}],this.params={keyword:"",colName:"organization_name",pageSize:25,pageNumber:0,orderby:!1,status:"",published_status:"",pageCount:0,pageSizes:[5,10,25]},this.data=[{id:0,clientName:"Naveen",createdTime:"001245583",publishedStatus:"active",status:"active",updatedTime:"4862268356"}],this.paymentData={amount:0,order_id:"",customer_name:"",customer_email:"",customer_mobile:""}}makePayment(){this.http.post("http://your-server-url/initiate-payment",this.paymentData).subscribe(a=>{window.location.href=a.redirect_url})}getList(){this.orgs=this.data,this.isLoaded=!0,this.isEmpty=!1;let{pageCount:a,pageSizes:e,...i}=this.params;this.api.allOrgs(i).pipe((0,l.R)(this.unsubscribe)).subscribe(s=>{200===s.statusCode&&(this.isLoaded=!0,200===s.statusCode&&(this.isEmpty=!1,this.orgs=s.response))})}ngOnInit(){this.getList()}ngAfterViewInit(){this.columns=[{prop:"clientName",name:"Organization Name",cellTemplate:this.orgTemp,sort:!0},{prop:"createdTime",name:"Created On",cellTemplate:this.createdTemp,sort:!0},{prop:"updatedTime",name:"Updated On",cellTemplate:this.updatedTemp,sort:!0},{prop:"publishedStatus",name:"Published",cellTemplate:this.publishTemp,sort:!0},{prop:"status",name:"Status",cellTemplate:this.statusTemp,sort:!0},{prop:"actions",name:"Actions",cellTemplate:this.actionsTemp}],this.cd.detectChanges()}onSubmit(){this.form.valid?this.api.createOrg(this.form.value).pipe((0,l.R)(this.unsubscribe)).subscribe(a=>{200===a.statusCode&&200===a.statusCode&&(this.crud.toggle(null),this.isLoaded=!1,this.snackbar.open("Org Added",null,{duration:1e3}),this.getList())}):this.form.markAllAsTouched()}onUpdate(){this.form.valid?this.api.createOrg(this.form.value).pipe((0,l.R)(this.unsubscribe)).subscribe(a=>{200===a.statusCode&&200===a.statusCode&&(this.crud.toggle(null),this.isLoaded=!1,this.snackbar.open("Org Updated",null,{duration:1e3}),this.getList())}):this.form.markAllAsTouched()}onChange(a){a||this.form.reset({status:this.form.get("status").value,published:this.form.get("published").value})}updateFn(a){console.log(a),this.crud.toggle("edit"),this.form.patchValue(a),this.form.get("id").setValue(a._id)}deleteFn(a){this.fcs.open().afterClosed().pipe((0,l.R)(this.unsubscribe)).subscribe(i=>{"confirmed"===i&&this.api.deleteOrg(a._id).pipe((0,l.R)(this.unsubscribe)).subscribe(s=>{200===s.statusCode&&200===s.statusCode&&(this.isLoaded=!1,this.snackbar.open("Org Deleted",null,{duration:1e3}),this.getList())})})}onPageChange(a){this.params.pageNumber=a.pageIndex,this.params.pageSize=a.pageSize,this.getList()}getSecret(a){this.router.navigate(["manageOrganizations/code",a.id]),this.api.secret=a.secret}onApply(){this.params.published_status=this.filter.value.published_status,this.params.status=this.filter.value.status,this.getList(),this.crud.filterToggle()}onSearch(a){this.isLoaded=!1,this.params.keyword=a.value?a.value:"",this.getList()}}u.\u0275fac=function(a){return new(a||u)(t.Y36(b.sM),t.Y36(r.qu),t.Y36(t.sBO),t.Y36(v.R),t.Y36(Z.ux),t.Y36(g.F0),t.Y36(C.eN))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-organizations"]],viewQuery:function(a,e){if(1&a&&(t.Gf(_.D,5),t.Gf(y,5),t.Gf(I,5),t.Gf(J,5),t.Gf(L,5),t.Gf(Y,5),t.Gf(Q,5),t.Gf(S,5)),2&a){let i;t.iGM(i=t.CRH())&&(e.crud=i.first),t.iGM(i=t.CRH())&&(e.orgTemp=i.first),t.iGM(i=t.CRH())&&(e.createdTemp=i.first),t.iGM(i=t.CRH())&&(e.updatedTemp=i.first),t.iGM(i=t.CRH())&&(e.actionsTemp=i.first),t.iGM(i=t.CRH())&&(e.publishTemp=i.first),t.iGM(i=t.CRH())&&(e.publishonTemp=i.first),t.iGM(i=t.CRH())&&(e.statusTemp=i.first)}},hostAttrs:[1,"flex","flex-col","flex-auto"],features:[t.qOj],decls:17,vars:8,consts:[[3,"isEmpty","isLoaded","rows","columns","breadcrumbs","formTemplate","filterTemplate","pagination","onPageChange","onSubmit","onUpdate","onApply","onChange","onSearch"],["orgTemp",""],["createdTemp",""],["updatedTemp",""],["statusTemp",""],["publishTemp",""],["actionsTemp",""],["filterTemplate",""],["formTemplate",""],["role","button",1,"flex","items-center"],[1,"ml-4","mr-auto"],[1,"font-semibold"],[1,"text-sm","text-gray-400"],[3,"className","label"],[1,"flex","items-center"],["type","button","mat-icon-button","","matTooltip","Delete","data-cy","delete",3,"disabled","click"],[3,"svgIcon"],["type","button","mat-icon-button","","matTooltip","Update","data-cy","edit",3,"click"],["type","button","mat-icon-button","","matTooltip","view","data-cy","view",3,"routerLink"],[3,"formGroup"],[1,"col-span-2"],["hideRequiredMarker","",1,"w-full"],["name","published_status","formControlName","published_status"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","status","formControlName","status"],[3,"value"],[1,"grid","grid-cols-1","gap-4"],["hideRequiredMarker","","subscriptSizing","dynamic",1,"w-full"],["matInput","","formControlName","clientName","data-cy","clientName"],[4,"ngIf"],["matInput","","formControlName","email","data-cy","email"],["matInput","","formControlName","phoneNumber","data-cy","phoneNumber"],["matInput","","formControlName","domain","data-cy","domain"],["matInput","","formControlName","address","data-cy","address"],["subscriptSizing","dynamic",1,"w-full"],["matInput","","formControlName","defaultAnswer","data-cy","defaultAnswer"],["class","col-span-2",4,"ngIf"]],template:function(a,e){if(1&a&&(t.TgZ(0,"app-crud",0),t.NdJ("onPageChange",function(s){return e.onPageChange(s)})("onSubmit",function(){return e.onSubmit()})("onUpdate",function(){return e.onUpdate()})("onApply",function(){return e.onApply()})("onChange",function(s){return e.onChange(s)})("onSearch",function(s){return e.onSearch(s)}),t.qZA(),t.YNc(1,R,7,3,"ng-template",null,1,t.W1O),t.YNc(3,w,2,4,"ng-template",null,2,t.W1O),t.YNc(5,G,2,4,"ng-template",null,3,t.W1O),t.YNc(7,E,1,2,"ng-template",null,4,t.W1O),t.YNc(9,M,4,6,"ng-template",null,5,t.W1O),t.YNc(11,P,7,7,"ng-template",null,6,t.W1O),t.YNc(13,H,17,3,"ng-template",null,7,t.W1O),t.YNc(15,it,41,10,"ng-template",null,8,t.W1O)),2&a){const i=t.MAs(14),s=t.MAs(16);t.Q6J("isEmpty",e.isEmpty)("isLoaded",e.isLoaded)("rows",e.orgs)("columns",e.columns)("breadcrumbs",e.breadcrumbs)("formTemplate",s)("filterTemplate",i)("pagination",e.params)}},dependencies:[c.sg,c.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,_.D,A.RK,O.Hw,N.Nt,f.KE,f.hX,f.TO,z.gD,U.ey,x.gM,q.e,g.rH,c.uU]});var ot=o(2665);const st=[{path:"",component:u}];class m{}m.\u0275fac=function(a){return new(a||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[c.ez,ot.m,g.Bz.forChild(st)]})}}]);