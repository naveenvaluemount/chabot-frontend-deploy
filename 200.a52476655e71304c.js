"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[200],{7200:(D,g,a)=>{a.r(g),a.d(g,{FaqModule:()=>p});var d=a(6895),m=a(4006),q=a(3419),h=a(9080),u=a(2722),e=a(4650),T=a(9274),_=a(3060),v=a(7401),C=a(7009),F=a(4859),A=a(7392),y=a(284),f=a(9549),Z=a(4385),b=a(3238),x=a(266);const I=["qnaTemp"],N=["createdOnTemp"],w=["updatedOnTemp"],Q=["actionsTemp"];function O(s,t){if(1&s&&(e.TgZ(0,"div")(1,"div",11),e._uU(2),e.qZA()()),2&s){const n=e.oxw().row;e.xp6(2),e.Oqu(null==n.questions[0]?null:n.questions[0].name)}}function U(s,t){if(1&s&&(e.TgZ(0,"div",7),e._UZ(1,"div"),e.TgZ(2,"div",8),e.YNc(3,O,3,1,"div",9),e.TgZ(4,"div",10),e._uU(5),e.qZA()()()),2&s){const n=t.row;e.xp6(1),e.uIk("acronym",null==n?null:n.clientName),e.xp6(2),e.Q6J("ngForOf",n.questions),e.xp6(2),e.Oqu(null==n?null:n.answer)}}function J(s,t){if(1&s){const n=e.EpF();e.TgZ(0,"div",12)(1,"button",13),e.NdJ("click",function(){const r=e.CHM(n).row,l=e.oxw();return e.KtG(l.deleteFn(r))}),e._UZ(2,"mat-icon",14),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){const r=e.CHM(n).row,l=e.oxw();return e.KtG(l.updateFn(r))}),e._UZ(4,"mat-icon",14),e.qZA()()}2&s&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:pencil"))}function S(s,t){1&s&&e._uU(0),2&s&&e.hij(" ",t.row.createdTime," ")}function G(s,t){1&s&&e._uU(0),2&s&&e.hij(" ",t.row.createdTime," ")}function P(s,t){if(1&s&&(e.TgZ(0,"form",16)(1,"div")(2,"mat-form-field",17)(3,"mat-label"),e._uU(4,"Status"),e.qZA(),e.TgZ(5,"mat-select",18)(6,"mat-option",19),e._uU(7,"Active"),e.qZA(),e.TgZ(8,"mat-option",19),e._uU(9,"Inactive"),e.qZA()()()()()),2&s){const n=e.oxw();e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1)}}function k(s,t){1&s&&(e.TgZ(0,"mat-error"),e._uU(1,"*Required "),e.qZA())}function M(s,t){if(1&s&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&s){const n=t.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.name," ")}}function Y(s,t){1&s&&(e.TgZ(0,"mat-error"),e._uU(1,"*Required "),e.qZA())}function R(s,t){1&s&&(e.TgZ(0,"mat-error"),e._uU(1,"*Required "),e.qZA())}function E(s,t){if(1&s){const n=e.EpF();e.TgZ(0,"div",32)(1,"mat-form-field",23),e._UZ(2,"input",33),e.TgZ(3,"mat-icon",34),e.NdJ("click",function(){const r=e.CHM(n).index,l=e.oxw(2);return e.KtG(l.form.get("questions").controls.length>1&&l.removeQuestions(r))}),e.qZA(),e.YNc(4,R,2,0,"mat-error",22),e.qZA()()}if(2&s){const n=t.$implicit;e.Q6J("formGroupName",t.index),e.xp6(4),e.Q6J("ngIf",n.get("name").hasError("required")&&n.get("name").touched)}}function L(s,t){1&s&&(e.TgZ(0,"mat-error"),e._uU(1,"*Required "),e.qZA())}function z(s,t){if(1&s){const n=e.EpF();e.TgZ(0,"div",32)(1,"mat-form-field",35),e._UZ(2,"input",36),e.TgZ(3,"mat-icon",34),e.NdJ("click",function(){const r=e.CHM(n).index,l=e.oxw(2);return e.KtG(l.form.get("qnaPrompts").controls.length>1&&l.removePremices(r))}),e.qZA()()()}2&s&&e.Q6J("formGroupName",t.index)}function H(s,t){if(1&s){const n=e.EpF();e.TgZ(0,"form",16)(1,"div",20)(2,"div")(3,"mat-form-field",17)(4,"mat-label"),e._uU(5,"FAQ Title"),e.qZA(),e._UZ(6,"input",21),e.YNc(7,k,2,0,"mat-error",22),e.qZA()(),e.TgZ(8,"div")(9,"mat-form-field",23)(10,"mat-label"),e._uU(11,"FAQ Type"),e.qZA(),e.TgZ(12,"mat-select",24),e.YNc(13,M,2,2,"mat-option",25),e.qZA(),e.YNc(14,Y,2,0,"mat-error",22),e.qZA()(),e.TgZ(15,"div")(16,"div")(17,"mat-label",26),e._uU(18,"Questions "),e.TgZ(19,"mat-icon",27),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addQuestions())}),e.qZA()(),e.TgZ(20,"div",28),e.YNc(21,E,5,2,"div",29),e.qZA()()(),e.TgZ(22,"div")(23,"mat-form-field",23)(24,"mat-label"),e._uU(25,"Answer"),e.qZA(),e._UZ(26,"textarea",30),e.qZA(),e.YNc(27,L,2,0,"mat-error",22),e.qZA(),e.TgZ(28,"div")(29,"mat-label",26),e._uU(30,"Meta Data "),e.TgZ(31,"mat-icon",27),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addPremices())}),e.qZA()(),e.TgZ(32,"div",31),e.YNc(33,z,4,1,"div",29),e.qZA()()()()}if(2&s){const n=e.oxw();e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("ngIf",n.form.get("title").hasError("required")),e.xp6(6),e.Q6J("ngForOf",n.faqTypeList),e.xp6(1),e.Q6J("ngIf",n.form.get("loginTypesId").hasError("required")),e.xp6(7),e.Q6J("ngForOf",n.form.get("questions").controls),e.xp6(6),e.Q6J("ngIf",n.form.get("answer").hasError("required")&&n.form.get("answer").touched),e.xp6(6),e.Q6J("ngForOf",n.form.get("qnaPrompts").controls)}}class c extends q.f{constructor(t,n,o,i,r,l){super(),this.api=t,this.cd=n,this.fb=o,this.route=i,this.fcs=r,this.snackbar=l,this.isEmpty=!1,this.isLoaded=!1,this.breadcrumbs=[{name:"Home",link:""},{name:"Organizations",link:""},{name:"FAQ",link:""}],this.form=this.fb.group({title:["",[m.kI.required]],loginTypesId:["",[m.kI.required]],questions:this.fb.array([]),answer:["",[m.kI.required]],organizationId:0,faqId:[],status:[!0],qnaPrompts:this.fb.array([])}),this.params={client:"",keyword:"",colName:"title",pageSize:25,pageNumber:0,orderby:!1,status:!1,pageCount:0,pageSizes:[5,10,25]},this.faqTypeList=[{id:"1",name:"Both",value:3},{id:"2",name:"Pre Login",value:1},{id:"3",name:"Post Login",value:2}],this.staticFaqsList=[{id:1,title:"hlo",faqType:"prelogin",answer:"Hlo",createdTime:"15863584",updatedTime:"755455"}]}ngOnInit(){this.route?.parent?.parent?.params.subscribe(t=>{t.id&&(this.oid=t.id,this.getAllFaqs(this.oid),this.form.get("organizationId").setValue(this.oid))})}ngAfterViewInit(){this.columns=[{prop:"title",name:"Title",sort:!0},{prop:"faqType",name:"FAQ Type",sort:!0},{prop:"answer",name:"QnA",cellTemplate:this.qnaTemp},{prop:"createdTime",name:"Created On",cellTemplate:this.createdOnTemp},{prop:"updatedTime",name:"Updated On",cellTemplate:this.updatedOnTemp},{prop:"actions",name:"Actions",cellTemplate:this.actionsTemp,class:"!flex-0 basis-[100px]"}],this.cd.detectChanges()}questions(){return this.form.get("questions")}premices(){return this.form.get("qnaPrompts")}newQuestion(t){return t?this.fb.group({id:t.id?t.id:"",name:t.name?t.name:"",rowStatus:JSON.stringify(t.rowStatus)?JSON.stringify(t.rowStatus):""},[m.kI.required]):this.fb.group({name:["",[m.kI.required]]})}newPremices(t){return this.fb.group(t?{id:t.id?t.id:"",faqId:t.faqId?t.faqId:"",displayText:t.displayText?t.displayText:"",displayOrder:t.displayOrder?t.displayOrder:""}:{faqId:[""],displayText:[""],displayOrder:[""]})}addQuestions(t){t?this.questions().push(this.newQuestion(t)):this.questions().push(this.newQuestion())}addPremices(t){t?this.premices().push(this.newPremices(t)):this.premices().push(this.newPremices())}removeQuestions(t){this.questions().removeAt(t)}removePremices(t){this.premices().removeAt(t)}getAllFaqs(t){this.faqs=this.staticFaqsList,this.isLoaded=!0,this.isEmpty=!1,this.params.status=this.form.value?.status,this.params.client=t;let{pageCount:n,pageSizes:o,...i}=this.params;this.api.allFaqs(i).pipe((0,u.R)(this.unsubscribe)).subscribe(r=>{200===r.statusCode&&(this.isLoaded=!0,200===r.response.statusCode&&(this.isEmpty=!1,this.faqs=r.response.response,this.params.pageCount=r.response.count,this.isEmpty=0==r.response.count))})}onSubmit(){this.form.valid?this.api.addFaq(this.form.value).pipe((0,u.R)(this.unsubscribe)).subscribe(t=>{200===t.statusCode&&200===t.response.statusCode&&(this.crud.toggle(null),this.isLoaded=!1,this.snackbar.open("FAQ Added",null,{duration:1e3}),this.getAllFaqs(this.oid))}):this.form.markAllAsTouched()}onUpdate(){this.form.valid?this.api.addFaq(this.form.value).pipe((0,u.R)(this.unsubscribe)).subscribe(t=>{200===t.statusCode&&200===t.response.statusCode&&(this.crud.toggle(null),this.isLoaded=!1,this.snackbar.open("FAQ Updated",null,{duration:1e3}),this.getAllFaqs(this.oid))}):this.form.markAllAsTouched()}updateFn(t){this.crud.toggle("edit"),this.form.patchValue({title:t.title,loginTypesId:t.loginTypesId,answer:t.answer,questions:this.fb.array[t.questions?.map(n=>{this.addQuestions(n)})],qnaPrompts:this.fb.array[t.qnaPrompts?.map(n=>{this.addPremices(n)})]}),this.form.get("faqId").setValue(t.faqId)}deleteFn(t){let n=this.fcs.open(),o={faqId:t.faqId,client:this.oid};n.afterClosed().pipe((0,u.R)(this.unsubscribe)).subscribe(i=>{"confirmed"===i&&this.api.deleteFaq(o).pipe((0,u.R)(this.unsubscribe)).subscribe(r=>{200===r.statusCode&&200===r.response.statusCode&&(this.isLoaded=!1,this.snackbar.open("FAQ Deleted",null,{duration:1e3}),this.getAllFaqs(this.oid))})})}onChange(t){t||this.form.reset({organizationId:this.form.get("organizationId").value,status:this.form.get("status").value}),this.form.get("faqId")?.value?(this.questions().removeAt(0),this.premices().removeAt(0)):(this.questions().clear(),this.questions().push(this.newQuestion()),this.premices().clear(),this.premices().push(this.newPremices()))}onPageChange(t){this.params.pageNumber=t.pageIndex,this.params.pageSize=t.pageSize,this.getAllFaqs(this.oid)}onApply(){this.getAllFaqs(this.oid)}onSearch(t){this.isLoaded=!1,this.params.keyword=t.value?t.value:"",this.getAllFaqs(this.oid)}}c.\u0275fac=function(t){return new(t||c)(e.Y36(T.sM),e.Y36(e.sBO),e.Y36(m.qu),e.Y36(_.gz),e.Y36(v.R),e.Y36(C.ux))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-faq"]],viewQuery:function(t,n){if(1&t&&(e.Gf(h.D,5),e.Gf(I,5),e.Gf(N,5),e.Gf(w,5),e.Gf(Q,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.crud=o.first),e.iGM(o=e.CRH())&&(n.qnaTemp=o.first),e.iGM(o=e.CRH())&&(n.createdOnTemp=o.first),e.iGM(o=e.CRH())&&(n.updatedOnTemp=o.first),e.iGM(o=e.CRH())&&(n.actionsTemp=o.first)}},hostAttrs:[1,"flex","flex-col","flex-auto"],features:[e.qOj],decls:13,vars:8,consts:[[3,"isEmpty","isLoaded","breadcrumbs","rows","columns","formTemplate","filterTemplate","pagination","onPageChange","onSubmit","onUpdate","onApply","onChange","onSearch"],["qnaTemp",""],["actionsTemp",""],["createdOnTemp",""],["updatedOnTemp",""],["filterTemplate",""],["formTemplate",""],["role","button",1,"flex","items-center"],[1,"mr-auto"],[4,"ngFor","ngForOf"],[1,"font-semibold"],[1,"text-sm","text-gray-400"],[1,"flex","items-center"],["type","button","mat-icon-button","","matTooltip","Delete","data-cy","delete",3,"click"],[3,"svgIcon"],["type","button","mat-icon-button","","matTooltip","Update","data-cy","edit",3,"click"],[3,"formGroup"],["hideRequiredMarker","",1,"w-full"],["data-cy","status","formControlName","status"],[3,"value"],[1,"grid","grid-cols-1","gap-4"],["matInput","","formControlName","title","data-cy","title"],[4,"ngIf"],["hideRequiredMarker","","subscriptSizing","dynamic",1,"w-full"],["name","status","formControlName","loginTypesId"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-center","mb-2"],["svgIcon","heroicons_outline:plus","role","button",1,"ml-auto",3,"click"],["formArrayName","questions",1,"grid","grid-cols-1","gap-2"],[3,"formGroupName",4,"ngFor","ngForOf"],["matInput","","formControlName","answer","data-cy","answer"],["formArrayName","qnaPrompts",1,"grid","grid-cols-1","gap-2"],[3,"formGroupName"],["matInput","","formControlName","name","data-cy","questions"],["svgIcon","heroicons_outline:trash","role","button",3,"click"],["subscriptSizing","dynamic",1,"w-full"],["matInput","","formControlName","displayText","data-cy","displayText"]],template:function(t,n){if(1&t&&(e.TgZ(0,"app-crud",0),e.NdJ("onPageChange",function(i){return n.onPageChange(i)})("onSubmit",function(){return n.onSubmit()})("onUpdate",function(){return n.onUpdate()})("onApply",function(){return n.onApply()})("onChange",function(i){return n.onChange(i)})("onSearch",function(i){return n.onSearch(i)}),e.qZA(),e.YNc(1,U,6,3,"ng-template",null,1,e.W1O),e.YNc(3,J,5,2,"ng-template",null,2,e.W1O),e.YNc(5,S,1,1,"ng-template",null,3,e.W1O),e.YNc(7,G,1,1,"ng-template",null,4,e.W1O),e.YNc(9,P,10,3,"ng-template",null,5,e.W1O),e.YNc(11,H,34,7,"ng-template",null,6,e.W1O)),2&t){const o=e.MAs(10),i=e.MAs(12);e.Q6J("isEmpty",n.isEmpty)("isLoaded",n.isLoaded)("breadcrumbs",n.breadcrumbs)("rows",n.faqs)("columns",n.columns)("formTemplate",i)("filterTemplate",o)("pagination",n.params)}},dependencies:[d.sg,d.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.x0,m.CE,h.D,F.RK,A.Hw,y.Nt,f.KE,f.hX,f.TO,Z.gD,b.ey,x.gM]});var K=a(2665);const j=[{path:"",component:c}];class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[d.ez,K.m,_.Bz.forChild(j)]})}}]);