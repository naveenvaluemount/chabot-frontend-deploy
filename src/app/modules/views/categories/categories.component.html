<app-crud
[isEmpty]="isEmpty"
[isLoaded]="isLoaded"
[rows]="categories"
[columns]="columns"
[formTemplate]="formTemplate"
[filterTemplate]="filterTemplate"
[breadcrumbs]="breadcrumbs"
[pagination]="params"
(onPageChange)="onPageChange($event)"
(onApply)="onApply()"
(onSubmit)="onSubmit()"
(onUpdate)="onUpdate()"
(onChange)="onChange($event)"
>
</app-crud>

<ng-template #actionsTemp let-row="row">
    <button type="button" data-cy="delete" mat-icon-button (click)="deleteFn(row)"><mat-icon [svgIcon]="'heroicons_outline:trash'"></mat-icon></button>
    <button type="button" data-cy="edit" mat-icon-button (click)="updateFn(row)"><mat-icon [svgIcon]="'heroicons_outline:pencil'"></mat-icon></button>
</ng-template>

<!-- Fiter Template -->
<ng-template #filterTemplate>
<form [formGroup]="form">
    <div>
        <mat-form-field class="w-full" hideRequiredMarker>
            <mat-label>Status</mat-label>
            <mat-select data-cy="status" formControlName="status">
                <mat-option value="active">Active</mat-option>
                <mat-option value="inActive">Inactive</mat-option>
              </mat-select>
        </mat-form-field>
    </div>
</form>
</ng-template>

<ng-template #formTemplate>
    <form [formGroup]="form">
         <div class="grid grid-cols-2 gap-4">
        <div>
            <mat-form-field class="w-full" hideRequiredMarker>
                <mat-label>Category Name</mat-label>
                <input matInput formControlName="categoryName" data-cy="categoryName">
                <mat-error *ngIf="form.get('categoryName').hasError('required')">*Required </mat-error>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field class="w-full">
                <mat-label>Parent</mat-label>
                <mat-select  formControlName="parentCategoryId" data-cy="parentCategoryId">
                    <mat-option *ngFor="let item of categories" [value]="item.categoryId">{{item.categoryName}}</mat-option>
                  </mat-select>
            </mat-form-field>
        </div>
        <div class="col-span-2">
            <mat-form-field class="w-full">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description" data-cy="description"></textarea>
            </mat-form-field>
        </div>
        <div class="col-span-2" *ngIf="form.get('categoryId').value">
            <mat-form-field class="w-full" hideRequiredMarker>
                <mat-label>Status</mat-label>
                    <mat-select name="status" formControlName="status">
                      <mat-option *ngFor="let status of statusList" [value]="status.value"  >
                        {{status.name}}
                      </mat-option>
                    </mat-select>
                <mat-error *ngIf="form.get('status').hasError('required')">*Required </mat-error>
            </mat-form-field>
        </div>
    </div>
    </form>
</ng-template>
