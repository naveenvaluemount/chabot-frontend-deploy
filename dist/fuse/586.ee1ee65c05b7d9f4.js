"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[586],{9586:(H,h,o)=>{o.r(h),o.d(h,{WhitelistModule:()=>m});var c=o(6895),l=o(4006),T=o(3419),g=o(9080),p=o(2722),t=o(4650),C=o(9274),_=o(3060),v=o(7401),A=o(7009),Z=o(4859),b=o(7392),x=o(284),f=o(9549),y=o(4385),W=o(3238);const I=["ipTemp"],N=["statusTemp"],U=["actionsTemp"];function q(s,e){if(1&s&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&s){const i=t.oxw().row;t.xp6(1),t.Oqu(null==i?null:i.ipAddressName)}}function J(s,e){if(1&s&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&s){const i=t.oxw().row;t.xp6(1),t.Oqu(null==i?null:i.domain)}}function k(s,e){if(1&s&&(t.TgZ(0,"div",6),t._UZ(1,"div"),t.TgZ(2,"div",7),t.YNc(3,q,2,1,"div",8),t.YNc(4,J,2,1,"div",8),t.qZA()()),2&s){const i=e.row;t.xp6(1),t.uIk("acronym",null==i?null:i.clientName),t.xp6(2),t.Q6J("ngIf",null==i?null:i.ipAddressName),t.xp6(1),t.Q6J("ngIf",null==i?null:i.domain)}}const w=function(s,e){return{"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":s,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":e}};function S(s,e){if(1&s&&(t.TgZ(0,"span",9)(1,"span",10),t._uU(2),t.qZA()()),2&s){const i=e.row;t.Q6J("ngClass",t.WLB(2,w,"inActive"==i.status,"active"==i.status)),t.xp6(2),t.Oqu(i.status)}}function Y(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){const r=t.CHM(i).row,u=t.oxw();return t.KtG(u.deleteFn(r))}),t._UZ(1,"mat-icon",12),t.qZA(),t.TgZ(2,"button",13),t.NdJ("click",function(){const r=t.CHM(i).row,u=t.oxw();return t.KtG(u.updateFn(r))}),t._UZ(3,"mat-icon",12),t.qZA()}2&s&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:pencil"))}function L(s,e){if(1&s&&(t.TgZ(0,"form",14)(1,"div")(2,"mat-form-field",15)(3,"mat-label"),t._uU(4,"Status"),t.qZA(),t.TgZ(5,"mat-select",16)(6,"mat-option",17),t._uU(7,"Active"),t.qZA(),t.TgZ(8,"mat-option",18),t._uU(9,"Inactive"),t.qZA()()()()()),2&s){const i=t.oxw();t.Q6J("formGroup",i.form)}}function E(s,e){1&s&&(t.TgZ(0,"mat-error"),t._uU(1,"*Required "),t.qZA())}function R(s,e){1&s&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid Domain Url "),t.qZA())}function Q(s,e){if(1&s&&(t.TgZ(0,"div",20)(1,"mat-form-field",27)(2,"mat-label"),t._uU(3,"Domain"),t.qZA(),t._UZ(4,"input",28,29),t.YNc(6,E,2,0,"mat-error",8),t.YNc(7,R,2,0,"mat-error",8),t.qZA()()),2&s){const i=t.oxw(2);t.xp6(6),t.Q6J("ngIf",i.form.get("domain").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.form.get("domain").hasError("pattern"))}}function M(s,e){1&s&&(t.TgZ(0,"mat-error"),t._uU(1,"*Required "),t.qZA())}function z(s,e){1&s&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid IP Address "),t.qZA())}function G(s,e){if(1&s&&(t.TgZ(0,"div",20)(1,"mat-form-field",27)(2,"mat-label"),t._uU(3,"IP Address"),t.qZA(),t._UZ(4,"input",30,31),t.YNc(6,M,2,0,"mat-error",8),t.YNc(7,z,2,0,"mat-error",8),t.qZA()()),2&s){const i=t.oxw(2);t.xp6(6),t.Q6J("ngIf",i.form.get("ipAddressName").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.form.get("ipAddressName").hasError("pattern"))}}function O(s,e){1&s&&(t.TgZ(0,"mat-error"),t._uU(1,"*Required "),t.qZA())}function P(s,e){if(1&s){const i=t.EpF();t.TgZ(0,"form",14)(1,"div",19)(2,"div",20)(3,"mat-label"),t._uU(4,"Address Type"),t.qZA(),t.TgZ(5,"mat-form-field",21)(6,"mat-select",22,23),t.NdJ("selectionChange",function(){t.CHM(i);const a=t.MAs(7),r=t.oxw();return t.KtG(r.checkValidation(a.value))}),t.TgZ(8,"mat-option",24),t._uU(9,"Domain"),t.qZA(),t.TgZ(10,"mat-option",25),t._uU(11,"IP"),t.qZA()()()(),t.YNc(12,Q,8,2,"div",26),t.YNc(13,G,8,2,"div",26),t.TgZ(14,"div",20)(15,"mat-form-field",27)(16,"mat-label"),t._uU(17,"Status"),t.qZA(),t.TgZ(18,"mat-select",16)(19,"mat-option",17),t._uU(20,"Active"),t.qZA(),t.TgZ(21,"mat-option",18),t._uU(22,"Inactive"),t.qZA()(),t.YNc(23,O,2,0,"mat-error",8),t.qZA()()()()}if(2&s){const i=t.oxw();t.Q6J("formGroup",i.form),t.xp6(12),t.Q6J("ngIf","domain"==i.form.get("addressType").value),t.xp6(1),t.Q6J("ngIf","ip"==i.form.get("addressType").value),t.xp6(10),t.Q6J("ngIf",i.form.get("status").hasError("required"))}}class d extends T.f{constructor(e,i,n,a,r,u){super(),this.api=e,this.cd=i,this.fb=n,this.route=a,this.fcs=r,this.snackbar=u,this.isEmpty=!1,this.isLoaded=!1,this.breadcrumbs=[{name:"Home",link:""},{name:"Organizations",link:""},{name:"Whitelist",link:""}],this.form=this.fb.group({id:[0],addressType:["",[l.kI.required]],domain:[""],ipAddressName:[""],status:[""],organizationId:[null]}),this.params={client:"",keyword:"",colName:"ip_address",pageSize:25,pageNumber:0,orderby:!1,status:"",pageCount:0,pageSizes:[5,10,25]},this.data=[{ipAddressName:"192.168.92.167",status:"active"}]}getList(e){this.categories=this.data,this.isLoaded=!0,this.isEmpty=!1,this.params.client=e;let{pageCount:i,pageSizes:n,...a}=this.params;this.api.allWhitelist(a).pipe((0,p.R)(this.unsubscribe)).subscribe(r=>{200===r.statusCode&&(this.isLoaded=!0,200===r.response.statusCode&&(this.isEmpty=!1,this.categories=r.response.response,this.params.pageCount=r.response.count,this.isEmpty=0==r.response.count),404===r.response.statusCode&&(this.isEmpty=!0))})}checkValidation(e){"domain"==e&&(this.form.clearValidators(),this.form.get("ipAddressName").setErrors(null),this.form.get("domain").setValidators([l.kI.required,l.kI.pattern(this.api.patterns.domain)])),"ip"==e&&(this.form.clearValidators(),this.form.get("domain").setErrors(null),this.form.get("ipAddressName").setValidators([l.kI.required,l.kI.pattern(this.api.patterns.ip)])),this.form.updateValueAndValidity()}onApply(){this.params.status=this.form.value?.status,this.getList(this.oid)}onSearch(e){this.isLoaded=!1,this.params.keyword=e.value?e.value:"",this.getList(this.oid)}updateFn(e){this.crud.toggle("edit"),this.form.patchValue(e),this.form.get("id").setValue(e.id)}deleteFn(e){this.fcs.open().afterClosed().pipe((0,p.R)(this.unsubscribe)).subscribe(n=>{"confirmed"===n&&this.api.deleteWhitelist(e.id,this.oid).pipe((0,p.R)(this.unsubscribe)).subscribe(a=>{200===a.statusCode&&200===a.response.statusCode&&(this.isLoaded=!1,this.snackbar.open("IP Deleted",null,{duration:1e3}),this.getList(this.oid))})})}onPageChange(e){this.params.pageNumber=e.pageIndex,this.params.pageSize=e.pageSize,this.getList(this.oid)}ngOnInit(){this.route?.parent?.parent?.params.subscribe(e=>{e.id&&(this.oid=e.id,this.getList(this.oid),this.form.get("organizationId").setValue(this.oid))})}ngAfterViewInit(){this.columns=[{prop:"ipAddressName",name:"IP/Domain Address",cellTemplate:this.ipTemp,sort:!0},{prop:"status",name:"Status",cellTemplate:this.statusTemp,sort:!0},{prop:"actions",name:"Actions",cellTemplate:this.actionsTemp,class:"!flex-0 basis-[100px]"}],this.cd.detectChanges()}onSubmit(){this.form.valid?this.api.createWhitelist(this.form.value).pipe((0,p.R)(this.unsubscribe)).subscribe(e=>{200===e.statusCode&&200===e.response.statusCode&&(this.crud.toggle(null),this.isLoaded=!1,this.snackbar.open("IP Added",null,{duration:1e3}),this.getList(this.oid))}):this.form.markAllAsTouched()}onUpdate(){this.form.valid?this.api.createWhitelist(this.form.value).pipe((0,p.R)(this.unsubscribe)).subscribe(e=>{200===e.statusCode&&200===e.response.statusCode&&(this.crud.toggle(null),this.isLoaded=!1,this.snackbar.open("IP Updated",null,{duration:1e3}),this.getList(this.oid))}):this.form.markAllAsTouched()}onChange(e){e||this.form.reset({organizationId:this.form.get("organizationId").value})}}d.\u0275fac=function(e){return new(e||d)(t.Y36(C.sM),t.Y36(t.sBO),t.Y36(l.qu),t.Y36(_.gz),t.Y36(v.R),t.Y36(A.ux))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-whitelist"]],viewQuery:function(e,i){if(1&e&&(t.Gf(g.D,5),t.Gf(I,5),t.Gf(N,5),t.Gf(U,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.crud=n.first),t.iGM(n=t.CRH())&&(i.ipTemp=n.first),t.iGM(n=t.CRH())&&(i.statusTemp=n.first),t.iGM(n=t.CRH())&&(i.actionsTemp=n.first)}},hostAttrs:[1,"flex","flex-col","flex-auto"],features:[t.qOj],decls:11,vars:8,consts:[[3,"isEmpty","isLoaded","rows","columns","breadcrumbs","formTemplate","filterTemplate","pagination","onPageChange","onApply","onSubmit","onUpdate","onChange","onSearch"],["ipTemp",""],["statusTemp",""],["actionsTemp",""],["filterTemplate",""],["formTemplate",""],["role","button",1,"flex","items-center"],[1,"ml-4","mr-auto"],[4,"ngIf"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],["type","button","data-cy","delete","mat-icon-button","",3,"click"],[3,"svgIcon"],["type","button","data-cy","edit","mat-icon-button","",3,"click"],[3,"formGroup"],["hideRequiredMarker","",1,"w-full"],["data-cy","status","formControlName","status"],["value","active"],["value","inActive"],[1,"grid","grid-cols-2","gap-4"],[1,"col-span-2"],["subscriptSizing","dynamic",1,"w-full"],["formControlName","addressType",3,"selectionChange"],["type",""],["value","domain"],["value","ip"],["class","col-span-2",4,"ngIf"],["hideRequiredMarker","","subscriptSizing","dynamic",1,"w-full"],["matInput","","formControlName","domain","data-cy","domain"],["domain",""],["matInput","","formControlName","ipAddressName","data-cy","ipAddressName"],["ip",""]],template:function(e,i){if(1&e&&(t.TgZ(0,"app-crud",0),t.NdJ("onPageChange",function(a){return i.onPageChange(a)})("onApply",function(){return i.onApply()})("onSubmit",function(){return i.onSubmit()})("onUpdate",function(){return i.onUpdate()})("onChange",function(a){return i.onChange(a)})("onSearch",function(a){return i.onSearch(a)}),t.qZA(),t.YNc(1,k,5,3,"ng-template",null,1,t.W1O),t.YNc(3,S,3,5,"ng-template",null,2,t.W1O),t.YNc(5,Y,4,2,"ng-template",null,3,t.W1O),t.YNc(7,L,10,1,"ng-template",null,4,t.W1O),t.YNc(9,P,24,4,"ng-template",null,5,t.W1O)),2&e){const n=t.MAs(8),a=t.MAs(10);t.Q6J("isEmpty",i.isEmpty)("isLoaded",i.isLoaded)("rows",i.categories)("columns",i.columns)("breadcrumbs",i.breadcrumbs)("formTemplate",a)("filterTemplate",n)("pagination",i.params)}},dependencies:[c.mk,c.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,g.D,Z.RK,b.Hw,x.Nt,f.KE,f.hX,f.TO,y.gD,W.ey]});var V=o(2665);const F=[{path:"",component:d}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[c.ez,V.m,_.Bz.forChild(F)]})}}]);