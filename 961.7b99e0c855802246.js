"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[961],{1961:(E,f,a)=>{a.r(f),a.d(f,{ServicesModule:()=>l});var d=a(6895),h=a(3060),m=a(4006),v=a(3419),_=a(9080),p=a(2722),e=a(4650),y=a(9274),T=a(7401),C=a(7009),b=a(4859),Z=a(7392),x=a(284),g=a(9549),A=a(4385),S=a(3238),N=a(2173);const I=["statusTemp"],q=["actionsTemp"];function U(i,t){if(1&i){const s=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const r=e.CHM(s).row,c=e.oxw();return e.KtG(c.deleteFn(r))}),e._UZ(1,"mat-icon",6),e.qZA(),e.TgZ(2,"button",7),e.NdJ("click",function(){const r=e.CHM(s).row,c=e.oxw();return e.KtG(c.updateFn(r))}),e._UZ(3,"mat-icon",6),e.qZA()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:pencil"))}function J(i,t){if(1&i&&e._UZ(0,"app-status-badge",8),2&i){const s=t.row;e.Q6J("className","active"===s.status?"bg-blue-500":"bg-gray-400")("label",s.status)}}function L(i,t){if(1&i&&(e.TgZ(0,"form",9)(1,"div")(2,"mat-form-field",10)(3,"mat-label"),e._uU(4,"Status"),e.qZA(),e.TgZ(5,"mat-select",11)(6,"mat-option",12),e._uU(7,"Active"),e.qZA(),e.TgZ(8,"mat-option",13),e._uU(9,"Inactive"),e.qZA()()()()()),2&i){const s=e.oxw();e.Q6J("formGroup",s.form)}}function O(i,t){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"*Required "),e.qZA())}function P(i,t){if(1&i&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&i){const s=t.$implicit;e.Q6J("value",s.value),e.xp6(1),e.hij(" ",s.name," ")}}function Q(i,t){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"*Required "),e.qZA())}function Y(i,t){if(1&i&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&i){const s=t.$implicit;e.Q6J("value",s.categoryId),e.xp6(1),e.Oqu(s.categoryName)}}function w(i,t){if(1&i){const s=e.EpF();e.TgZ(0,"div",29)(1,"mat-form-field",30)(2,"mat-label",31),e._uU(3,"Title"),e.qZA(),e.TgZ(4,"mat-select",32),e.YNc(5,Y,2,2,"mat-option",20),e.qZA()(),e.TgZ(6,"mat-form-field",33)(7,"mat-label",31),e._uU(8,"Display Text"),e.qZA(),e._UZ(9,"input",34),e.qZA(),e.TgZ(10,"mat-form-field",33)(11,"mat-label",31),e._uU(12,"Display Order"),e.qZA(),e._UZ(13,"input",35),e.qZA(),e.TgZ(14,"button",36)(15,"mat-icon",37),e.NdJ("click",function(){const r=e.CHM(s).index,c=e.oxw(2);return e.KtG(c.form.get("qnaPrompts").controls.length>1&&c.removePremices(r))}),e.qZA()()()}if(2&i){const s=t.index,o=e.oxw(2);e.Q6J("formGroupName",s),e.xp6(5),e.Q6J("ngForOf",o.categories)}}function F(i,t){if(1&i&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&i){const s=t.$implicit;e.Q6J("value",s.value),e.xp6(1),e.hij(" ",s.name," ")}}function R(i,t){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"*Required "),e.qZA())}function z(i,t){if(1&i&&(e.TgZ(0,"div",15)(1,"mat-form-field",16)(2,"mat-label"),e._uU(3,"Status"),e.qZA(),e.TgZ(4,"mat-select",38),e.YNc(5,F,2,2,"mat-option",20),e.qZA(),e.YNc(6,R,2,0,"mat-error",18),e.qZA()()),2&i){const s=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",s.statusList),e.xp6(1),e.Q6J("ngIf",s.form.get("status").hasError("required"))}}function G(i,t){if(1&i){const s=e.EpF();e.TgZ(0,"form",9)(1,"div",14)(2,"div",15)(3,"mat-form-field",16)(4,"mat-label"),e._uU(5,"Service Name"),e.qZA(),e._UZ(6,"input",17),e.YNc(7,O,2,0,"mat-error",18),e.qZA()(),e.TgZ(8,"div",15)(9,"mat-form-field",16)(10,"mat-label"),e._uU(11,"Service Type"),e.qZA(),e.TgZ(12,"mat-select",19),e.YNc(13,P,2,2,"mat-option",20),e.qZA(),e.YNc(14,Q,2,0,"mat-error",18),e.qZA()(),e.TgZ(15,"div",15)(16,"mat-form-field",21)(17,"mat-label"),e._uU(18,"Default Text"),e.qZA(),e._UZ(19,"textarea",22),e.qZA()(),e.TgZ(20,"div",15)(21,"mat-label",23),e._uU(22,"Prompts "),e.TgZ(23,"mat-icon",24),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.addPremices())}),e.qZA()(),e.TgZ(24,"div",25),e.YNc(25,w,16,2,"div",26),e.qZA()(),e.YNc(26,z,7,2,"div",27),e.qZA()()}if(2&i){const s=e.oxw();e.Q6J("formGroup",s.form),e.xp6(7),e.Q6J("ngIf",s.form.get("categoryName").hasError("required")),e.xp6(6),e.Q6J("ngForOf",s.serviceTypeList),e.xp6(1),e.Q6J("ngIf",s.form.get("loginTypesId").hasError("required")),e.xp6(11),e.Q6J("ngForOf",s.form.get("qnaPrompts").controls),e.xp6(1),e.Q6J("ngIf",s.form.get("categoryId").value)}}class u extends v.f{constructor(t,s,o,n,r,c){super(),this.api=t,this.cd=s,this.fb=o,this.route=n,this.fcs=r,this.snackbar=c,this.isEmpty=!1,this.isLoaded=!1,this.breadcrumbs=[{name:"Home",link:""},{name:"Organizations",link:""},{name:"Services",link:""}],this.categories=[],this.form=this.fb.group({categoryName:["",m.kI.required],answer:[""],categoryId:[null],organizationId:[null],status:[""],loginTypesId:["",[m.kI.required]],qnaPrompts:this.fb.array([])}),this.statusList=[{id:0,name:"Active",value:"active"},{id:1,name:"In Active",value:"inActive"}],this.serviceTypeList=[{id:"1",name:"Both",value:3},{id:"2",name:"Pre Login",value:1},{id:"3",name:"Post Login",value:2}],this.params={client:"",keyword:"",colName:"category_name",pageSize:25,pageNumber:0,orderby:!1,status:"",pageCount:0,pageSizes:[5,10,25]},this.data=[{id:1,categoryName:"test",parentCategoryName:"test",status:"active"},{id:2,categoryName:"hlo",parentCategoryName:"hlo",status:"inActive"}]}getList(t){this.categories=this.data,this.isLoaded=!0,this.isEmpty=!1,this.params.client=t;let{pageCount:s,pageSizes:o,...n}=this.params;this.api.allCategories(n).pipe((0,p.R)(this.unsubscribe)).subscribe(r=>{200===r.statusCode&&(this.isLoaded=!0,200===r.response.statusCode&&(this.categories=r.response.response,this.params.pageCount=r.response.count,this.isEmpty=0==r.response.count))})}premices(){return this.form.get("qnaPrompts")}newPremices(t){return this.fb.group(t?{id:t.id?t.id:"",categoryId:t.categoryId?t.categoryId:"",displayText:t.displayText?t.displayText:"",displayOrder:t.displayOrder?t.displayOrder:""}:{categoryId:[""],displayText:[""],displayOrder:[""]})}addPremices(t){t?this.premices().push(this.newPremices(t)):this.premices().push(this.newPremices())}removePremices(t){this.premices().removeAt(t)}updateFn(t){this.crud.toggle("edit"),this.form.patchValue({categoryName:t.categoryName,loginTypesId:t.loginTypesId,answer:t.answer,status:t.status,qnaPrompts:this.fb.array[t.qnaPrompts?.map(s=>{this.addPremices(s)})]}),this.form.get("categoryId").setValue(t.categoryId)}deleteFn(t){let s=this.fcs.open(),o={client:this.oid};s.afterClosed().pipe((0,p.R)(this.unsubscribe)).subscribe(n=>{"confirmed"===n&&this.api.deleteCategory(t.categoryId,o).pipe((0,p.R)(this.unsubscribe)).subscribe(r=>{200===r.statusCode&&200===r.response.statusCode&&(this.isLoaded=!1,this.snackbar.open("Category Deleted",null,{duration:1e3}),this.getList(this.oid))})})}ngOnInit(){this.route?.parent?.parent?.params.subscribe(t=>{t.id&&(this.oid=t.id,this.getList(this.oid),this.form.get("organizationId").setValue(this.oid))})}ngOnChanges(){}ngAfterViewInit(){this.columns=[{prop:"categoryName",name:"Service",sort:!0},{prop:"answer",name:"Display Text",sort:!0},{prop:"status",name:"Status",cellTemplate:this.statusTemp,sort:!0},{prop:"actions",name:"Actions",cellTemplate:this.actionsTemp,class:"!flex-0 basis-[100px]"}],this.cd.detectChanges()}onSubmit(){this.form.valid?this.api.createCategory(this.form.value).pipe((0,p.R)(this.unsubscribe)).subscribe(t=>{200===t.statusCode&&200===t.response.statusCode&&(this.crud.toggle(null),this.isLoaded=!1,this.snackbar.open("Category Added",null,{duration:1e3}),this.getList(this.oid))}):this.form.markAllAsTouched()}onUpdate(){this.form.valid?this.api.createCategory(this.form.value).pipe((0,p.R)(this.unsubscribe)).subscribe(t=>{200===t.statusCode&&200===t.response.statusCode&&(this.crud.toggle(null),this.isLoaded=!1,this.snackbar.open("Category Updated",null,{duration:1e3}),this.getList(this.oid))}):this.form.markAllAsTouched()}onChange(t){t||this.form.reset({organizationId:this.form.get("organizationId").value,status:this.form.get("status").value}),this.form.get("categoryId")?.value?this.premices().removeAt(0):(this.premices().clear(),this.premices().push(this.newPremices()))}onPageChange(t){this.params.pageNumber=t.pageIndex,this.params.pageSize=t.pageSize,this.getList(this.oid)}onApply(){this.params.status=this.form.value?.status,this.getList(this.oid)}onSearch(t){this.isLoaded=!1,this.params.keyword=t.value?t.value:"",this.getList(this.oid)}}u.\u0275fac=function(t){return new(t||u)(e.Y36(y.sM),e.Y36(e.sBO),e.Y36(m.qu),e.Y36(h.gz),e.Y36(T.R),e.Y36(C.ux))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-services"]],viewQuery:function(t,s){if(1&t&&(e.Gf(_.D,5),e.Gf(I,5),e.Gf(q,5)),2&t){let o;e.iGM(o=e.CRH())&&(s.crud=o.first),e.iGM(o=e.CRH())&&(s.statusTemp=o.first),e.iGM(o=e.CRH())&&(s.actionsTemp=o.first)}},hostAttrs:[1,"flex","flex-col","flex-auto"],features:[e.qOj,e.TTD],decls:9,vars:8,consts:[[3,"isEmpty","isLoaded","rows","columns","formTemplate","filterTemplate","breadcrumbs","pagination","onPageChange","onApply","onSubmit","onUpdate","onChange","onSearch"],["actionsTemp",""],["statusTemp",""],["filterTemplate",""],["formTemplate",""],["type","button","data-cy","delete","mat-icon-button","",3,"click"],[3,"svgIcon"],["type","button","data-cy","edit","mat-icon-button","",3,"click"],[3,"className","label"],[3,"formGroup"],["hideRequiredMarker","",1,"w-full"],["data-cy","status","formControlName","status"],["value","active"],["value","inActive"],[1,"grid","grid-cols-2","gap-4"],[1,"col-span-2"],["hideRequiredMarker","","subscriptSizing","dynamic",1,"w-full"],["matInput","","formControlName","categoryName","data-cy","categoryName"],[4,"ngIf"],["name","status","formControlName","loginTypesId"],[3,"value",4,"ngFor","ngForOf"],["subscriptSizing","dynamic",1,"w-full"],["matInput","","formControlName","answer","data-cy","defaultText"],[1,"flex","items-center","mb-2"],["svgIcon","heroicons_outline:plus","role","button",1,"ml-auto",3,"click"],["formArrayName","qnaPrompts",1,"flex","flex-col","gap-2"],["class","flex items-center gap-2",3,"formGroupName",4,"ngFor","ngForOf"],["class","col-span-2",4,"ngIf"],[3,"value"],[1,"flex","items-center","gap-2",3,"formGroupName"],["hideRequiredMarker","","subscriptSizing","dynamic",1,"flex-auto"],[1,"text-sm"],["data-cy","qnaPrompts","formControlName","categoryId"],["subscriptSizing","dynamic",1,"flex-auto"],["matInput","","formControlName","displayText","data-cy","displayText"],["matInput","","formControlName","displayOrder","data-cy","displayOrder"],["mat-icon-button","",1,"self-end","mb-[4px]"],["svgIcon","heroicons_outline:trash","role","button",3,"click"],["name","status","formControlName","status"]],template:function(t,s){if(1&t&&(e.TgZ(0,"app-crud",0),e.NdJ("onPageChange",function(n){return s.onPageChange(n)})("onApply",function(){return s.onApply()})("onSubmit",function(){return s.onSubmit()})("onUpdate",function(){return s.onUpdate()})("onChange",function(n){return s.onChange(n)})("onSearch",function(n){return s.onSearch(n)}),e.qZA(),e.YNc(1,U,4,2,"ng-template",null,1,e.W1O),e.YNc(3,J,1,2,"ng-template",null,2,e.W1O),e.YNc(5,L,10,1,"ng-template",null,3,e.W1O),e.YNc(7,G,27,6,"ng-template",null,4,e.W1O)),2&t){const o=e.MAs(6),n=e.MAs(8);e.Q6J("isEmpty",s.isEmpty)("isLoaded",s.isLoaded)("rows",s.categories)("columns",s.columns)("formTemplate",n)("filterTemplate",o)("breadcrumbs",s.breadcrumbs)("pagination",s.params)}},dependencies:[d.sg,d.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.x0,m.CE,_.D,b.RK,Z.Hw,x.Nt,g.KE,g.hX,g.TO,A.gD,S.ey,N.e]});var M=a(2665);const k=[{path:"",component:u}];class l{}l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[d.ez,M.m,h.Bz.forChild(k)]})}}]);